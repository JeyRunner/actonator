## Firmware for the Motor Driver Board
Implements field oriented control.

### Structure
```bash
└── src
    ├── canSot           # can protocol (contains autogenerated code)
    ├── cubeMxGenerated  # auto generated code
    ├── motordriver      # main implementation of the bldc motor driver
    └── stm32_custom     # stm specific hardware interface implementation
```

### Compile and Flash Firmware
Note that you first have to generate the can protocol code, see [can_client_lib/README.md](../can_client_lib/README.md) (here run `genCanSotHeaders`). The compile the firmware:
```
mkdir build
cd build
cmake ..
make
```
This will produce the binary `motorDriver_stm32.elf`.

Now you can program the micorcontroller with a programmer that is conneced to the host computer:
```bash
# in the firmware/ folder
openocd -f stm32F103_Debug_self_start.cfg \
	-c "program motorDriver_stm32.elf verify reset exit"
```